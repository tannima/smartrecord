# 智能语音思考记录器 (SmartRecord)

一个高效的语音转文字工具，通过快捷键快速记录你的想法和灵感。

## ✨ 核心特性

- 🎯 **一键启动** - Command+Shift+R 快捷键即可启动
- 🎤 **智能录音** - 自动检测语音开始和结束
- ⏱️ **灵活控制** - 支持自动停止、手动结束、取消录音
- 🇨🇳 **中文识别** - 基于 Google 语音识别 API
- 💾 **自动保存** - 按日期和时间戳自动组织保存
- 📁 **便捷存储** - 保存在桌面 Thought 文件夹
- ✨ **无感体验** - 自动关闭终端窗口，不留痕迹

## 🚀 快速开始

### 安装依赖

```bash
chmod +x install.sh
./install.sh
```

### 运行程序

**方式一：使用快捷键（推荐）**
1. 按照 [快捷键配置说明.md](快捷键配置说明.md) 配置 Command+Shift+R
2. 按下快捷键即可启动

**方式二：使用启动脚本**
```bash
./launch_recorder.sh
```

**方式三：直接运行（测试用）**
```bash
source .venv/bin/activate
python3 voice_recorder.py
```

## 📖 使用说明

### 完整工作流程

1. 🎹 **启动** - 按 Command+Shift+R 或运行启动脚本
2. 🖥️ **终端弹出** - 自动打开新终端窗口
3. 🎤 **开始说话** - 看到提示后直接说话
4. ⏸️ **停止录音** - 以下任一方式：
   - **自动停止** - 安静 3秒 自动结束
   - **手动结束** - 按 **E键** 立即结束并识别
   - **取消录音** - 按 **ESC键** 取消（不识别不保存）
5. 💾 **自动保存** - 识别结果保存到 `~/Desktop/Thought/YYYY-MM-DD.txt`
6. ✨ **自动关闭** - 终端窗口自动关闭

### 录音控制详解

| 操作 | 按键/方式 | 结果 | 说明 |
|------|----------|------|------|
| 自动停止 | 安静 3秒 | ✅ 识别并保存 | 说话停顿3秒后自动结束 |
| 手动结束 | 按 **E键** | ✅ 识别并保存 | 不想等3秒，直接结束 |
| 取消录音 | 按 **ESC键** | ❌ 不识别不保存 | 说错了，取消本次录音 |
| 强制退出 | Ctrl+C | 直接退出 | 紧急退出程序 |

### 录音参数

- ⏰ **最长录音时间** - 2分钟
- 🎙️ **停顿容忍** - 3秒（说话停顿3秒内不会结束）
- ⏳ **启动超时** - 30秒（30秒内需开始说话）

## 📁 文件保存

### 存储位置
```
~/Desktop/Thought/
```

### 文件命名
```
YYYY-MM-DD.txt
```
例如：`2025-11-09.txt`

### 记录格式
```
[YYYY-MM-DD HH:MM:SS] 识别的文字内容

[2025-11-09 14:30:25] 今天要完成项目的语音识别功能

[2025-11-09 15:45:10] 记得晚上和团队开会讨论新功能
```

### 快速查看记录

```bash
# 打开今天的记录
open ~/Desktop/Thought/$(date +%Y-%m-%d).txt

# 打开所有记录
open ~/Desktop/Thought/
```

## ⚙️ 配置快捷键

详细配置步骤请查看：[快捷键配置说明.md](快捷键配置说明.md)

**简要步骤：**
1. 打开"自动操作"应用
2. 创建"快速操作"
3. 添加"运行 Shell 脚本"
4. 在系统设置中配置 Command+Shift+R 快捷键

## 🔐 权限设置

### 1. 麦克风权限（必需）
- **系统设置 > 隐私与安全性 > 麦克风**
- 允许 **Terminal** 访问麦克风
- 首次运行时会自动提示

### 2. 辅助功能权限（推荐）
- **系统设置 > 隐私与安全性 > 辅助功能**
- 添加 **Terminal** 或 **Python**
- 用于监听 E键和ESC键

## 💡 使用技巧

### 最佳使用场景
- 💭 快速记录灵感
- 📝 会议记录
- ✅ 待办事项
- 🗣️ 语音备忘
- 📚 读书笔记
- 🎯 每日总结

### 提高识别准确率
1. 在安静环境下录音
2. 清晰地发音，避免含糊不清
3. 避免说话过快
4. 保持麦克风距离适中（20-30cm）
5. 使用标准普通话

### 快捷键推荐
- **Command+Shift+R**（推荐，当前配置）
- Command+Option+R
- Command+Control+R
- 或选择你习惯且不冲突的组合

## 🛠️ 技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| Python | 3.x | 主要编程语言 |
| SpeechRecognition | 3.10+ | 语音识别库 |
| PyAudio | 0.2+ | 音频录制 |
| pynput | 1.7+ | 键盘监听 |
| Google Speech API | - | 语音转文字服务 |

## 📂 项目结构

```
SmartRecord/
├── voice_recorder.py          # 主程序
├── launch_recorder.sh         # 启动脚本
├── install.sh                 # 安装脚本
├── 快捷键配置说明.md           # 快捷键配置教程
├── README.md                  # 本文档
└── .venv/                     # Python虚拟环境
```

## ❓ 常见问题

### Q1: 快捷键不生效？
**A:** 检查系统设置中是否有冲突的快捷键，尝试重启或注销重新登录。

### Q2: 终端没有自动关闭？
**A:**
1. 确保使用启动脚本或快捷键启动，直接运行 `python3 voice_recorder.py` 不会自动关闭。
2. 需要设置 Terminal 偏好设置：
   - 打开 Terminal > 设置 > 描述文件 > Shell
   - 将"当 shell 退出时"设置为"关闭窗口"

### Q3: E键或ESC键不响应？
**A:** 需要授予辅助功能权限。进入**系统设置 > 隐私与安全性 > 辅助功能**，添加 Terminal。

### Q4: 语音识别失败？
**A:**
- 检查网络连接（Google API需要网络）
- 确认麦克风权限已授予
- 在安静环境下录音
- 说话清晰

### Q5: 如何修改停顿时间？
**A:** 编辑 [voice_recorder.py:27](voice_recorder.py#L27)，修改 `pause_threshold` 值（单位：秒）。

### Q6: 如何支持其他语言？
**A:** 编辑 [voice_recorder.py:99](voice_recorder.py#L99)，修改 `language` 参数：
- 英语：`en-US`
- 日语：`ja-JP`
- 韩语：`ko-KR`

## 🔄 更新日志

### v2.0 (2025-11-09)
- ✨ 新增 E键手动结束功能
- ✨ 新增 ESC键取消录音功能
- ✨ 自动关闭终端窗口
- 🔧 调整停顿检测为3秒
- 🔧 延长最长录音时间至2分钟
- 📁 更改默认存储路径至桌面Thought文件夹
- 📝 添加详细的快捷键配置文档
- 🐛 修复按ESC后重新录音的bug
- 🐛 修复终端关闭时的弹窗提示

### v1.0
- 🎉 初始版本发布
- 🎤 基本的语音录制和识别功能
- 💾 按日期保存记录

## 📊 快速参考卡片

```
┌─────────────────────────────────────────────────┐
│          智能语音思考记录器 - 快速指南             │
├─────────────────────────────────────────────────┤
│ 启动：Command+Shift+R                            │
│ 自动：安静3秒停止                                 │
│ 结束：E键（识别并保存）                           │
│ 取消：ESC键（不识别不保存）                       │
│ 位置：~/Desktop/Thought/                         │
│ 格式：YYYY-MM-DD.txt                             │
└─────────────────────────────────────────────────┘
```

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

## 🙏 致谢

- Google Speech Recognition API
- SpeechRecognition 库
- PyAudio 库
- pynput 库

---

**Made with ❤️ for efficient thought recording**
