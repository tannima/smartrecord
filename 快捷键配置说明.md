# 快捷键配置说明 (Command+Shift+R)

本文档将指导你配置 **Command+Shift+R** 快捷键来启动语音记录器。

## 方法一：使用自动操作 + 系统快捷键（推荐）

### 步骤 1：创建自动操作服务

1. 打开 **"自动操作"** 应用（英文名：Automator）
   - 在启动台搜索"自动操作"
   - 或按 `Command + 空格` 搜索"自动操作"

2. 选择 **"快速操作"** 并点击 **"选取"**

3. 在右上角设置：
   - **工作流程收到** 选择 **"没有输入"**
   - **位于** 选择 **"任何应用程序"**

### 步骤 2：添加运行 Shell 脚本

1. 在左侧搜索栏输入 **"运行 Shell 脚本"**
2. 将其拖到右侧工作区
3. 将脚本内容替换为：

```bash
#!/bin/bash

# 激活虚拟环境并运行录音器
cd /Users/tanxiao/Desktop/Codes/SmartRecord

# 如果有虚拟环境，先激活
if [ -d ".venv" ]; then
    source .venv/bin/activate
fi

# 在新终端窗口中运行，程序结束后自动关闭终端
osascript -e 'tell application "Terminal"
    activate
    do script "cd /Users/tanxiao/Desktop/Codes/SmartRecord && source .venv/bin/activate && python3 voice_recorder.py && exit"
end tell'
```

4. 点击 **文件 > 存储**，命名为 **"启动语音记录器"**

### 步骤 3：设置快捷键

1. 打开 **系统设置**
2. 进入 **键盘**
3. 点击 **键盘快捷键** 按钮
4. 在左侧选择 **服务**（或 **服务** 下的 **通用**）
5. 在右侧找到 **"启动语音记录器"**
6. 点击右侧的快捷键区域，按下 **Command+Shift+R**

⚠️ **注意**：
- 如果 Command+Shift+R 已被占用，系统会提示
- 你可以选择其他组合：
  - Command+Option+R
  - Command+Control+R
  - 或其他你喜欢的组合

### 步骤 4：测试快捷键

1. 按下 **Command+Shift+R**
2. 应该会弹出终端窗口并启动语音记录器
3. 看到 "🎤 请开始说话..." 提示即表示成功

---

## 使用说明

配置完成后的使用流程：

### 完整工作流程

```
按 Command+Shift+R
    ↓
新终端窗口弹出
    ↓
🎤 开始说话
    ↓
[3秒静音 / 按E键 / 按ESC]
    ↓
识别完成 / 取消
    ↓
✨ 终端自动关闭
```

### 录音控制

| 操作 | 按键/方式 | 结果 |
|------|----------|------|
| 自动停止 | 安静 3秒 | ✅ 识别并保存 |
| 手动结束 | 按 **E键** | ✅ 识别并保存 |
| 取消录音 | 按 **ESC键** | ❌ 不识别，不保存 |
| 强制退出 | Ctrl+C | 直接退出 |

### 文件保存

- 📁 **存储位置**：`~/Desktop/Thought/`
- 📅 **文件命名**：`YYYY-MM-DD.txt`（按日期）
- ⏰ **记录格式**：`[YYYY-MM-DD HH:MM:SS] 文字内容`

示例：
```
[2025-11-09 14:30:25] 今天要完成项目的语音识别功能

[2025-11-09 15:45:10] 记得晚上和团队开会讨论新功能
```

---

## 权限设置

首次运行需要授予以下权限：

### 1. 麦克风权限（必需）
- **系统设置 > 隐私与安全性 > 麦克风**
- 允许 **Terminal** 访问麦克风
- 首次运行时会自动提示

### 2. 辅助功能权限（推荐）
- **系统设置 > 隐私与安全性 > 辅助功能**
- 添加 **Terminal** 或 **Python**
- 用于监听 E键和ESC键

---

## 故障排除

### 问题1：快捷键不生效
**可能原因：**
- 快捷键冲突
- 服务未启用
- 系统需要重启

**解决方法：**
1. 检查系统设置中是否有冲突的快捷键
2. 尝试使用其他组合键（如 Command+Option+R）
3. 重启系统或注销重新登录
4. 确保"自动操作"服务已保存并启用

### 问题2：找不到"启动语音记录器"服务
**解决方法：**
- 确认在"自动操作"中已保存服务
- 检查保存位置：`~/Library/Services/`
- 重新打开系统设置，刷新服务列表
- 尝试重新创建服务

### 问题3：终端弹出但提示找不到文件
**解决方法：**
- 检查脚本中的路径是否正确
- 确保路径为：`/Users/tanxiao/Desktop/Codes/SmartRecord`
- 确认 `voice_recorder.py` 文件存在
- 确认虚拟环境 `.venv` 已创建

### 问题4：麦克风无法识别
**解决方法：**
- 检查系统麦克风权限
- 测试麦克风是否正常工作（系统设置 > 声音）
- 尝试重新校准（重启程序）
- 确认麦克风音量适中

### 问题5：E键或ESC键不响应
**解决方法：**
- 检查辅助功能权限（最常见原因）
- 确认 Terminal 已添加到辅助功能列表
- 重启 Terminal 应用
- 如果还不行，重启电脑

### 问题6：语音识别失败
**解决方法：**
- 检查网络连接（Google API需要网络）
- 说话清晰，避免嘈杂环境
- 尝试重新录音
- 确认说的是中文（当前配置为中文识别）

### 问题7：终端没有自动关闭
**说明：**
- 只有通过快捷键或启动脚本打开的**新终端窗口**才会自动关闭
- 在已存在的终端中直接运行 `python3 voice_recorder.py` 不会自动关闭

**解决方法：**
需要修改 Terminal 的设置：
1. 打开 **Terminal 应用**
2. 菜单栏选择 **Terminal > 设置**（或按 Command+,）
3. 选择 **描述文件** 标签
4. 在左侧选择你正在使用的描述文件（通常是 "Basic" 或 "默认"）
5. 点击 **Shell** 标签
6. 在 **当 shell 退出时** 下拉菜单中选择 **关闭窗口**
7. 关闭设置窗口

完成后，再次测试快捷键，终端应该会自动关闭

---

## 技巧和建议

### 1. 最佳使用场景
- 💭 快速记录灵感
- 📝 会议记录
- ✅ 待办事项
- 🗣️ 语音备忘
- 📚 读书笔记
- 🎯 每日总结

### 2. 提高识别准确率
- 在安静环境下录音
- 清晰地发音，避免含糊不清
- 避免说话过快
- 保持麦克风距离适中（20-30cm）
- 使用标准普通话

### 3. 快捷键选择
- **Command+Shift+R**（推荐，当前配置）
- Command+Option+R（备选）
- Command+Control+R（备选）
- 选择不与其他应用冲突的组合

### 4. 快速查看记录
```bash
# 打开今天的记录
open ~/Desktop/Thought/$(date +%Y-%m-%d).txt

# 打开所有记录文件夹
open ~/Desktop/Thought/

# 搜索包含特定关键词的记录
grep -r "关键词" ~/Desktop/Thought/
```

### 5. 高效使用技巧
- 说完一句话后停顿1秒，帮助识别分句
- 长段落可以分多次录音
- 重要内容可以重复录音确保准确
- 定期整理和备份记录文件

---

## 方法二：使用 BetterTouchTool（可选）

如果你有 BetterTouchTool：

1. 打开 BetterTouchTool
2. 添加新快捷键
3. 设置为 Command+Shift+R
4. 动作选择 **"Run Terminal Command"**
5. 输入命令：
```bash
cd /Users/tanxiao/Desktop/Codes/SmartRecord && source .venv/bin/activate && python3 voice_recorder.py
```

---

## 方法三：使用 Alfred + Workflow（可选）

如果你有 Alfred Powerpack：

1. 打开 Alfred Preferences
2. 创建新 Workflow
3. 添加 Hotkey 触发器，设置为 Command+Shift+R
4. 连接到 Run Script 动作
5. 脚本内容同上

---

## 快速参考卡片

```
┌─────────────────────────────────────────────────┐
│          智能语音思考记录器 - 快速指南             │
├─────────────────────────────────────────────────┤
│ 启动：Command+Shift+R                            │
│ 自动：安静3秒停止                                 │
│ 结束：E键（识别并保存）                           │
│ 取消：ESC键（不识别不保存）                       │
│ 位置：~/Desktop/Thought/                         │
│ 格式：YYYY-MM-DD.txt                             │
└─────────────────────────────────────────────────┘
```

---

## 相关文档

- [README.md](README.md) - 项目总览和完整说明
- [voice_recorder.py](voice_recorder.py) - 主程序源码
- [launch_recorder.sh](launch_recorder.sh) - 启动脚本

---

**配置完成后，按 Command+Shift+R 即可享受流畅的语音记录体验！** 🎉

## 方法一：使用自动操作 + 系统快捷键（推荐）

### 步骤 1：创建自动操作服务

1. 打开 **"自动操作"** 应用（英文名：Automator，在应用程序文件夹中，或用 Spotlight 搜索"自动操作"）
2. 选择 **"快速操作"** 并点击 **"选取"**
3. 在右上角设置：
   - **工作流程收到** 选择 **"没有输入"**
   - **位于** 选择 **"任何应用程序"**

### 步骤 2：添加运行 Shell 脚本

1. 在左侧搜索栏输入 **"运行 Shell 脚本"**，将其拖到右侧工作区
2. 将脚本内容替换为：

```bash
#!/bin/bash

# 激活虚拟环境并运行录音器
cd /Users/tanxiao/Desktop/Codes/SmartRecord

# 如果有虚拟环境，先激活
if [ -d ".venv" ]; then
    source .venv/bin/activate
fi

# 在新终端窗口中运行，程序结束后自动关闭终端
osascript -e 'tell application "Terminal"
    activate
    do script "cd /Users/tanxiao/Desktop/Codes/SmartRecord && source .venv/bin/activate && python3 voice_recorder.py && exit"
end tell'
```

3. 点击 **文件 > 存储**，命名为 **"启动语音记录器"**

### 步骤 3：设置快捷键

1. 打开 **系统设置**
2. 进入 **键盘**
3. 点击 **键盘快捷键** 按钮
4. 在左侧选择 **服务**（或 **服务** 下的 **通用**）
5. 在右侧找到 **"启动语音记录器"**
6. 点击右侧的快捷键区域，按下 **Command+R**

⚠️ **注意**：
- 如果 Command+R 已被占用（如在浏览器中是刷新页面），系统会提示
- 你可以选择其他组合：
  - **Command+Shift+R**（推荐）
  - **Command+Option+R**
  - **Command+Control+R**
  - 或其他你喜欢的组合

### 步骤 4：测试快捷键

1. 按下你设置的快捷键（如 Command+R）
2. 应该会弹出终端窗口并启动语音记录器
3. 看到 "🎤 请开始说话..." 提示即表示成功

---

## 方法二：使用 BetterTouchTool（需要第三方软件）

如果你有 BetterTouchTool：

1. 打开 BetterTouchTool
2. 添加新快捷键
3. 设置为 Command+R
4. 动作选择 **"Run Terminal Command"**
5. 输入命令：
```bash
cd /Users/tanxiao/Desktop/Codes/SmartRecord && source .venv/bin/activate && python3 voice_recorder.py
```

---

## 方法三：使用 Alfred + Workflow（需要 Alfred Powerpack）

1. 打开 Alfred Preferences
2. 创建新 Workflow
3. 添加 Hotkey 触发器，设置为 Command+R
4. 连接到 Run Script 动作
5. 脚本内容同上

---

## 使用说明

配置完成后的使用流程：

1. 🎹 **按快捷键** - Command+R（或你设置的快捷键）
2. 🖥️ **终端弹出** - 自动打开并启动录音器
3. 🎤 **开始说话** - 看到提示后直接说话
4. ⏸️ **停止录音** - 以下任一方式：
   - 安静 **3秒** 自动停止
   - 按 **E键** 立即结束
   - 按 **ESC键** 取消录音
5. 💾 **自动保存** - 识别结果保存到 `~/Desktop/Thought/`
6. ✨ **自动关闭** - 终端窗口自动关闭

完整流程只需 **2-3秒**，非常流畅！

---

## 录音控制说明

| 操作 | 按键/方式 | 结果 |
|------|----------|------|
| 自动停止 | 安静3秒 | ✅ 识别并保存 |
| 手动结束 | 按 **E键** | ✅ 识别并保存 |
| 取消录音 | 按 **ESC键** | ❌ 不识别，不保存 |
| 强制退出 | Ctrl+C | 直接退出 |

---

## 文件保存位置

- 📁 **存储位置**：`~/Desktop/Thought/`
- 📅 **文件命名**：`YYYY-MM-DD.txt`（按日期）
- ⏰ **记录格式**：`[YYYY-MM-DD HH:MM:SS] 文字内容`

示例：
```
[2025-11-09 14:30:25] 今天要完成项目的语音识别功能

[2025-11-09 15:45:10] 记得晚上和团队开会讨论新功能
```

---

## 权限设置

首次运行需要授予以下权限：

### 1. 麦克风权限（必需）
- **系统设置 > 隐私与安全性 > 麦克风**
- 允许 **Terminal** 访问麦克风

### 2. 辅助功能权限（可选，ESC/E键功能需要）
- **系统设置 > 隐私与安全性 > 辅助功能**
- 添加 **Terminal** 或 **Python**
- 这样才能监听键盘按键（E键和ESC键）

---

## 故障排除

### 问题1：快捷键不生效
**解决方法：**
- 检查系统设置中是否有冲突的快捷键
- 尝试使用其他组合键（如 Command+Shift+R）
- 重启系统或注销重新登录
- 确保"自动操作"服务已保存并启用

### 问题2：找不到"启动语音记录器"服务
**解决方法：**
- 确认在"自动操作"中已保存服务
- 检查保存位置：`~/Library/Services/`
- 重新打开系统设置，刷新服务列表

### 问题3：终端弹出但提示找不到文件
**解决方法：**
- 检查脚本中的路径是否正确
- 确保路径为：`/Users/tanxiao/Desktop/Codes/SmartRecord`
- 确认 `voice_recorder.py` 文件存在

### 问题4：麦克风无法识别
**解决方法：**
- 检查系统麦克风权限
- 测试麦克风是否正常工作
- 尝试重新校准（重启程序）
- 确认麦克风音量适中

### 问题5：E键或ESC键不响应
**解决方法：**
- 检查辅助功能权限（最常见原因）
- 确认 Terminal 已添加到辅助功能列表
- 重启 Terminal 应用
- 如果还不行，重启电脑

### 问题6：语音识别失败
**解决方法：**
- 检查网络连接（Google API需要网络）
- 说话清晰，避免嘈杂环境
- 尝试重新录音

---

## 技巧和建议

1. **最佳使用场景**
   - 快速记录灵感
   - 会议记录
   - 待办事项
   - 语音备忘

2. **提高识别准确率**
   - 在安静环境下录音
   - 清晰地发音
   - 避免说话过快
   - 麦克风距离适中

3. **快捷键建议**
   - 如果 Command+R 被占用，推荐使用 **Command+Shift+R**
   - 或选择一个你常用但不冲突的组合

4. **查看记录**
   ```bash
   # 快速打开今天的记录
   open ~/Desktop/Thought/$(date +%Y-%m-%d).txt

   # 查看所有记录
   open ~/Desktop/Thought/
   ```

---

## 快速参考卡片

```
┌─────────────────────────────────────┐
│   智能语音思考记录器 - 快速指南      │
├─────────────────────────────────────┤
│ 启动：Command+R                      │
│ 结束：E键 或 安静3秒                 │
│ 取消：ESC键                          │
│ 位置：~/Desktop/Thought/             │
└─────────────────────────────────────┘
```
